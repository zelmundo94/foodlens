{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ketterdk\\\\Documents\\\\GitHub\\\\deployed-foodlens\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport Camera, { IMAGE_TYPES, FACING_MODES } from \"react-html5-camera-photo\";\nimport \"react-html5-camera-photo/build/css/index.css\";\nimport Loader from \"react-loader-spinner\";\nimport \"./App.css\";\nimport \"./Camera.css\";\nimport \"./Emojicon\";\nimport Modal from \"./Modal\";\nimport AnotherRecipeButton from \"./Components/Recipes\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.triggerRecipeState = () => {\n      this.setState({\n        displayRecipes: !this.state.displayRecipes\n      });\n    };\n\n    this.showCamera = e => {\n      this.setState({\n        cameraOn: true,\n        image: false,\n        loading: false,\n        fishclass: \"\",\n        confidence: \"\",\n        dataUri: \"\",\n        key: \"\"\n      });\n    };\n\n    this.handleShowDialog = () => {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n      console.log(\"clicked\");\n    };\n\n    this.handleUpload = event => {\n      if (this.uploadInput.files[0]) {\n        let file = this.uploadInput.files[0];\n        this.getBase64(file, result => {\n          fetch(\n          /* S3 endpoint here */\n          \"https://50xlesnkqe.execute-api.us-east-1.amazonaws.com/foodLens-deploy1/index\", {\n            method: \"POST\",\n            headers: {//\"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n              //'Access-Control-Allow-Origin': \"*\"\n            },\n            body: JSON.stringify({\n              payload: result.split(\",\")[1]\n            })\n          }).then(response => response.json()).then(data => {\n            console.log(\"tmp: \", data);\n            this.setState({\n              result: data,\n              cameraOn: false,\n              image: true,\n              dataUri: result,\n              loading: true,\n              isOpen: true,\n              message: \"UPLOAD AN IMAGE\"\n            });\n          }).catch(err => console.log(err));\n        });\n      } else {\n        return null;\n      }\n    };\n\n    this.handleChange = e => {\n      if (this.uploadInput.files[0]) {\n        let file = this.uploadInput.files[0];\n        this.getBase64(file, result => {\n          this.setState({\n            dataUri: result,\n            cameraOn: false,\n            image: true,\n            prediction: false\n          });\n        });\n      }\n    };\n\n    this.toggleModal = () => {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    };\n\n    this.displayResults = () => {\n      let popArray = [];\n      let prediction = this.state.result.probability;\n      console.log(prediction);\n\n      if (prediction > 0.8) {\n        popArray.push(React.createElement(\"ol\", {\n          className: \"information\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \"Name: \", this.state.result.display), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, \"Size: \", this.state.result.size), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, \"Habitat: \", this.state.result.habitat, \" \"), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, \"Weight: \", this.state.result.weight), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, \"Ethnicity: \", this.state.result.ethnicity)));\n      } else {\n        popArray.push(React.createElement(\"div\", {\n          class: \"cardContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, \"\\uD83D\\uDE14 Could not identify. Please try again \")));\n      }\n\n      return popArray;\n    };\n\n    this.state = {\n      idealFacingMode: FACING_MODES.USER,\n      myArray: [],\n      fishclass: \"\",\n      loading: false,\n      cameraOn: true,\n      image: false,\n      key: \"\",\n      upload: false,\n      dataUri: \"\",\n      prediction: false,\n      isOpen: false,\n      isEmptyState: true,\n      recipes: [{\n        id: 'pompano',\n        title: 'fried pompano'\n      }],\n      displayRecipes: false\n    };\n  }\n\n  getBase64(file, cb) {\n    let reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = function () {\n      cb(reader.result);\n    };\n\n    reader.onerror = function (error) {\n      console.log(\"Error: \", error);\n    };\n  }\n\n  onTakePhoto(dataUri) {\n    const savedImage = dataUri.split(\",\")[1];\n    fetch(\n    /* API endpoint here */\n    \"https://50xlesnkqe.execute-api.us-east-1.amazonaws.com/foodLens-deploy1/index\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        payload: savedImage\n      })\n    }).then(response => response.json()).then(data => this.setState({\n      savedImage: data,\n      cameraOn: false,\n      loading: true,\n      dataUri: savedImage\n    })).catch(err => console.log(err));\n  }\n\n  changeCameraType() {\n    if (this.state.idealFacingMode === FACING_MODES.ENVIRONMENT) {\n      this.setState({\n        idealFacingMode: FACING_MODES.USER,\n        isImageMirror: true\n      });\n    } else {\n      this.setState({\n        idealFacingMode: FACING_MODES.ENVIRONMENT,\n        isImageMirror: false\n      });\n    }\n  } // displayResults = () => {\n  //   let popArray = [];\n  //   for (let key in this.state.result) {\n  //     popArray.push(\n  //       <p key={key} className=\"information\">\n  //         {key}: {this.state.result[key]}\n  //       </p>\n  //     );\n  //   }\n  //   return popArray;\n  // };\n\n\n  render() {\n    let recipes = null;\n\n    if (this.state.displayRecipes && this.state.handleUpload) {\n      recipes = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, this.state.recipes.map((recipe, index) => {\n        return React.createElement(AnotherRecipeButton, {\n          key: recipe.id,\n          title: recipe.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        });\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"bg-image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wizard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"FOODLENS \\uD83E\\uDDD0\"), this.state.loading ? React.createElement(Loader, {\n      type: \"Grid\",\n      color: \"#008080\",\n      height: \"80\",\n      width: \"80\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }) : null, this.state.image ? React.createElement(\"div\", {\n      className: \"prediction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"fishImg\",\n      src: this.state.dataUri,\n      alt: \"uploaded pic of fish\",\n      onClick: this.handleShowDialog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }), this.state.prediction ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, parseFloat(this.state.confidence) > 85 ? React.createElement(\"div\", {\n      className: \"prediction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"We were unable to identify this fish. Please try again.\")), React.createElement(\"button\", {\n      className: \"openCamera\",\n      onClick: this.showCamera,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"Wanna take more photos?\")) : null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      show: this.state.isOpen,\n      onClose: this.toggleModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, this.state.result !== undefined ? this.displayResults() : \"\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, this.state.payload)), React.createElement(\"button\", {\n      className: \"openCamera\",\n      onClick: this.showCamera,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"Take another photo!\"), React.createElement(\"button\", {\n      className: \"recipeButton\",\n      onClick: this.triggerRecipeState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"View Recipes\"), recipes) : null, this.state.cameraOn ? React.createElement(\"div\", {\n      className: \"camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(Camera, {\n      imageType: IMAGE_TYPES.JPG,\n      idealFacingMode: this.state.idealFacingMode,\n      isImageMirror: this.state.isImageMirror,\n      idealResolution: {\n        width: 1440,\n        height: 1440\n      },\n      onTakePhoto: dataUri => {\n        this.onTakePhoto(dataUri);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.changeCameraType.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \"SWITCH\")) : null, this.state.loading ? null : React.createElement(\"div\", {\n      className: \"uploader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"inputfile\",\n      id: \"inputfile\",\n      name: \"input\",\n      ref: ref => {\n        this.uploadInput = ref;\n      },\n      onChange: this.handleChange,\n      type: \"file\",\n      accept: \"image/jpeg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"inputfile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, \"SELECT \", React.createElement(\"span\", {\n      role: \"img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"uploadButton\",\n      onClick: this.handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"DETECT\")))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\ketterdk\\Documents\\GitHub\\deployed-foodlens\\src\\App.js"],"names":["React","Component","Camera","IMAGE_TYPES","FACING_MODES","Loader","Modal","AnotherRecipeButton","App","constructor","props","triggerRecipeState","setState","displayRecipes","state","showCamera","e","cameraOn","image","loading","fishclass","confidence","dataUri","key","handleShowDialog","isOpen","console","log","handleUpload","event","uploadInput","files","file","getBase64","result","fetch","method","headers","body","JSON","stringify","payload","split","then","response","json","data","message","catch","err","handleChange","prediction","toggleModal","displayResults","popArray","probability","push","display","size","habitat","weight","ethnicity","idealFacingMode","USER","myArray","upload","isEmptyState","recipes","id","title","cb","reader","FileReader","readAsDataURL","onload","onerror","error","onTakePhoto","savedImage","changeCameraType","ENVIRONMENT","isImageMirror","render","map","recipe","index","parseFloat","undefined","JPG","width","height","bind","ref"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,IAAiBC,WAAjB,EAA8BC,YAA9B,QAAkD,0BAAlD;AACA,OAAO,8CAAP;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAO,WAAP;AACA,OAAO,cAAP;AACA,OAAO,YAAP;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,mBAAP,MAAgC,sBAAhC;;AAEA,MAAMC,GAAN,SAAkBP,SAAlB,CAA4B;AAC1BQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAsBnBC,kBAtBmB,GAsBE,MAAM;AACzB,WAAKC,QAAL,CAAc;AACVC,QAAAA,cAAc,EAAE,CAAC,KAAKC,KAAL,CAAWD;AADlB,OAAd;AAGH,KA1BoB;;AAAA,SAyCnBE,UAzCmB,GAyCNC,CAAC,IAAI;AAChB,WAAKJ,QAAL,CAAc;AACZK,QAAAA,QAAQ,EAAE,IADE;AAEZC,QAAAA,KAAK,EAAE,KAFK;AAGZC,QAAAA,OAAO,EAAE,KAHG;AAIZC,QAAAA,SAAS,EAAE,EAJC;AAKZC,QAAAA,UAAU,EAAE,EALA;AAMZC,QAAAA,OAAO,EAAE,EANG;AAOZC,QAAAA,GAAG,EAAE;AAPO,OAAd;AASD,KAnDkB;;AAAA,SA2EnBC,gBA3EmB,GA2EA,MAAM;AACvB,WAAKZ,QAAL,CAAc;AAAEa,QAAAA,MAAM,EAAE,CAAC,KAAKX,KAAL,CAAWW;AAAtB,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KA9EkB;;AAAA,SAiFnBC,YAjFmB,GAiFJC,KAAK,IAAI;AACtB,UAAI,KAAKC,WAAL,CAAiBC,KAAjB,CAAuB,CAAvB,CAAJ,EAA+B;AAC7B,YAAIC,IAAI,GAAG,KAAKF,WAAL,CAAiBC,KAAjB,CAAuB,CAAvB,CAAX;AACA,aAAKE,SAAL,CAAeD,IAAf,EAAqBE,MAAM,IAAI;AAC7BC,UAAAA,KAAK;AACH;AAAuB,yFADpB,EAEH;AACEC,YAAAA,MAAM,EAAE,MADV;AAEEC,YAAAA,OAAO,EAAE,CACP;AACA;AAFO,aAFX;AAMEC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEC,cAAAA,OAAO,EAAEP,MAAM,CAACQ,KAAP,CAAa,GAAb,EAAkB,CAAlB;AAAX,aAAf;AANR,WAFG,CAAL,CAWGC,IAXH,CAWQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAXpB,EAYGF,IAZH,CAYQG,IAAI,IAAI;AAEZpB,YAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBmB,IAArB;AAGA,iBAAKlC,QAAL,CAAc;AACZsB,cAAAA,MAAM,EAAEY,IADI;AAEZ7B,cAAAA,QAAQ,EAAE,KAFE;AAGZC,cAAAA,KAAK,EAAE,IAHK;AAIZI,cAAAA,OAAO,EAAEY,MAJG;AAKZf,cAAAA,OAAO,EAAE,IALG;AAMZM,cAAAA,MAAM,EAAE,IANI;AAOZsB,cAAAA,OAAO,EAAE;AAPG,aAAd;AASD,WA1BH,EA2BGC,KA3BH,CA2BSC,GAAG,IAAIvB,OAAO,CAACC,GAAR,CAAYsB,GAAZ,CA3BhB;AA4BD,SA7BD;AA8BD,OAhCD,MAgCO;AACL,eAAO,IAAP;AACD;AACF,KArHkB;;AAAA,SAyHnBC,YAzHmB,GAyHJlC,CAAC,IAAI;AAClB,UAAI,KAAKc,WAAL,CAAiBC,KAAjB,CAAuB,CAAvB,CAAJ,EAA+B;AAC7B,YAAIC,IAAI,GAAG,KAAKF,WAAL,CAAiBC,KAAjB,CAAuB,CAAvB,CAAX;AACA,aAAKE,SAAL,CAAeD,IAAf,EAAqBE,MAAM,IAAI;AAC7B,eAAKtB,QAAL,CAAc;AACZU,YAAAA,OAAO,EAAEY,MADG;AAEZjB,YAAAA,QAAQ,EAAE,KAFE;AAGZC,YAAAA,KAAK,EAAE,IAHK;AAIZiC,YAAAA,UAAU,EAAE;AAJA,WAAd;AAMD,SAPD;AAQD;AACF,KArIkB;;AAAA,SAuInBC,WAvImB,GAuIL,MAAM;AAClB,WAAKxC,QAAL,CAAc;AACZa,QAAAA,MAAM,EAAE,CAAC,KAAKX,KAAL,CAAWW;AADR,OAAd;AAGD,KA3IkB;;AAAA,SAuKnB4B,cAvKmB,GAuKF,MAAM;AACrB,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIH,UAAU,GAAG,KAAKrC,KAAL,CAAWoB,MAAX,CAAkBqB,WAAnC;AACA7B,MAAAA,OAAO,CAACC,GAAR,CAAYwB,UAAZ;;AACA,UAAIA,UAAU,GAAG,GAAjB,EAAsB;AACpBG,QAAAA,QAAQ,CAACE,IAAT,CACE;AAAI,UAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAW,KAAK1C,KAAL,CAAWoB,MAAX,CAAkBuB,OAA7B,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAW,KAAK3C,KAAL,CAAWoB,MAAX,CAAkBwB,IAA7B,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAc,KAAK5C,KAAL,CAAWoB,MAAX,CAAkByB,OAAhC,MAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAa,KAAK7C,KAAL,CAAWoB,MAAX,CAAkB0B,MAA/B,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAgB,KAAK9C,KAAL,CAAWoB,MAAX,CAAkB2B,SAAlC,CALF,CADF;AASD,OAVD,MAUO;AACLP,QAAAA,QAAQ,CAACE,IAAT,CACE;AAAK,UAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEADF,CADF;AAKD;;AAED,aAAOF,QAAP;AAED,KA/LkB;;AAEjB,SAAKxC,KAAL,GAAa;AACXgD,MAAAA,eAAe,EAAE1D,YAAY,CAAC2D,IADnB;AAEXC,MAAAA,OAAO,EAAE,EAFE;AAGX5C,MAAAA,SAAS,EAAE,EAHA;AAIXD,MAAAA,OAAO,EAAE,KAJE;AAKXF,MAAAA,QAAQ,EAAE,IALC;AAMXC,MAAAA,KAAK,EAAE,KANI;AAOXK,MAAAA,GAAG,EAAE,EAPM;AAQX0C,MAAAA,MAAM,EAAE,KARG;AASX3C,MAAAA,OAAO,EAAE,EATE;AAUX6B,MAAAA,UAAU,EAAE,KAVD;AAWX1B,MAAAA,MAAM,EAAE,KAXG;AAYXyC,MAAAA,YAAY,EAAE,IAZH;AAaXC,MAAAA,OAAO,EAAE,CAAE;AAACC,QAAAA,EAAE,EAAE,SAAL;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAAF,CAbE;AAcXxD,MAAAA,cAAc,EAAE;AAdL,KAAb;AAgBD;;AAYDoB,EAAAA,SAAS,CAACD,IAAD,EAAOsC,EAAP,EAAW;AAClB,QAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,IAAAA,MAAM,CAACE,aAAP,CAAqBzC,IAArB;;AACAuC,IAAAA,MAAM,CAACG,MAAP,GAAgB,YAAW;AACzBJ,MAAAA,EAAE,CAACC,MAAM,CAACrC,MAAR,CAAF;AACD,KAFD;;AAGAqC,IAAAA,MAAM,CAACI,OAAP,GAAiB,UAASC,KAAT,EAAgB;AAC/BlD,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBiD,KAAvB;AACD,KAFD;AAGD;;AAeDC,EAAAA,WAAW,CAACvD,OAAD,EAAU;AACnB,UAAMwD,UAAU,GAAGxD,OAAO,CAACoB,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAnB;AACAP,IAAAA,KAAK;AACH;AAAwB,mFADrB,EAEH;AACEC,MAAAA,MAAM,EAAE,MADV;AAEEE,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEC,QAAAA,OAAO,EAAEqC;AAAX,OAAf;AAFR,KAFG,CAAL,CAOGnC,IAPH,CAOQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPpB,EAQGF,IARH,CAQQG,IAAI,IACR,KAAKlC,QAAL,CAAc;AACZkE,MAAAA,UAAU,EAAEhC,IADA;AAEZ7B,MAAAA,QAAQ,EAAE,KAFE;AAGZE,MAAAA,OAAO,EAAE,IAHG;AAIZG,MAAAA,OAAO,EAAEwD;AAJG,KAAd,CATJ,EAgBG9B,KAhBH,CAgBSC,GAAG,IAAIvB,OAAO,CAACC,GAAR,CAAYsB,GAAZ,CAhBhB;AAiBD;;AAoED8B,EAAAA,gBAAgB,GAAG;AACjB,QAAI,KAAKjE,KAAL,CAAWgD,eAAX,KAA+B1D,YAAY,CAAC4E,WAAhD,EAA6D;AAC3D,WAAKpE,QAAL,CAAc;AACZkD,QAAAA,eAAe,EAAE1D,YAAY,CAAC2D,IADlB;AAEZkB,QAAAA,aAAa,EAAE;AAFH,OAAd;AAID,KALD,MAKO;AACL,WAAKrE,QAAL,CAAc;AACZkD,QAAAA,eAAe,EAAE1D,YAAY,CAAC4E,WADlB;AAEZC,QAAAA,aAAa,EAAE;AAFH,OAAd;AAID;AACF,GA1JyB,CA4J1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AA6BAC,EAAAA,MAAM,GAAG;AAEP,QAAIf,OAAO,GAAG,IAAd;;AAEA,QAAK,KAAKrD,KAAL,CAAWD,cAAX,IAA6B,KAAKC,KAAL,CAAWc,YAA7C,EAA2D;AACzDuC,MAAAA,OAAO,GACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACO,KAAKrD,KAAL,CAAWqD,OAAX,CAAmBgB,GAAnB,CAAuB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACvC,eAAO,oBAAC,mBAAD;AAAqB,UAAA,GAAG,EAAED,MAAM,CAAChB,EAAjC;AACP,UAAA,KAAK,EAAEgB,MAAM,CAACf,KADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAEJ,OAHC,CADP,CADA;AASD;;AAID,WACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAqBG,KAAKvD,KAAL,CAAWK,OAAX,GACC,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,MAAb;AAAoB,MAAA,KAAK,EAAC,SAA1B;AAAoC,MAAA,MAAM,EAAC,IAA3C;AAAgD,MAAA,KAAK,EAAC,IAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAEG,IAvBN,EAwBG,KAAKL,KAAL,CAAWI,KAAX,GACC;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,SADZ;AAEE,MAAA,GAAG,EAAE,KAAKJ,KAAL,CAAWQ,OAFlB;AAGE,MAAA,GAAG,EAAC,sBAHN;AAIE,MAAA,OAAO,EAAE,KAAKE,gBAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOG,KAAKV,KAAL,CAAWqC,UAAX,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGmC,UAAU,CAAC,KAAKxE,KAAL,CAAWO,UAAZ,CAAV,GAAoC,EAApC,GACC;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADD,GAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEADF,CARJ,EAeE;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,OAAO,EAAE,KAAKN,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAfF,CADD,GAoBG,IA3BN,EA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKD,KAAL,CAAWW,MAAxB;AAAgC,MAAA,OAAO,EAAE,KAAK2B,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKtC,KAAL,CAAWoB,MAAX,KAAsBqD,SAAtB,GACG,KAAKlC,cAAL,EADH,GAEG,EAHN,CAFF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO,KAAKvC,KAAL,CAAW2B,OAAlB,CAPF,CA5BF,EAqCE;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAA+B,MAAA,OAAO,EAAE,KAAK1B,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BArCF,EAyCE;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAiC,MAAA,OAAO,EAAE,KAAKJ,kBAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAzCF,EA0CEwD,OA1CF,CADD,GA8CG,IAtEN,EAuEG,KAAKrD,KAAL,CAAWG,QAAX,GACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,SAAS,EAAEd,WAAW,CAACqF,GADzB;AAEE,MAAA,eAAe,EAAE,KAAK1E,KAAL,CAAWgD,eAF9B;AAGE,MAAA,aAAa,EAAE,KAAKhD,KAAL,CAAWmE,aAH5B;AAIE,MAAA,eAAe,EAAE;AAAEQ,QAAAA,KAAK,EAAE,IAAT;AAAeC,QAAAA,MAAM,EAAE;AAAvB,OAJnB;AAKE,MAAA,WAAW,EAAEpE,OAAO,IAAI;AACtB,aAAKuD,WAAL,CAAiBvD,OAAjB;AACD,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAUE;AAAQ,MAAA,OAAO,EAAE,KAAKyD,gBAAL,CAAsBY,IAAtB,CAA2B,IAA3B,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVF,CADD,GAcG,IArFN,EAsFG,KAAK7E,KAAL,CAAWK,OAAX,GAAqB,IAArB,GACC;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,WADZ;AAEE,MAAA,EAAE,EAAC,WAFL;AAGE,MAAA,IAAI,EAAC,OAHP;AAIE,MAAA,GAAG,EAAEyE,GAAG,IAAI;AACV,aAAK9D,WAAL,GAAmB8D,GAAnB;AACD,OANH;AAOE,MAAA,QAAQ,EAAE,KAAK1C,YAPjB;AAQE,MAAA,IAAI,EAAC,MARP;AASE,MAAA,MAAM,EAAC,YATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAYE;AAAO,MAAA,OAAO,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACS;AAAM,MAAA,IAAI,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADT,CAZF,EAeE;AAAQ,MAAA,SAAS,EAAC,cAAlB;AAAiC,MAAA,OAAO,EAAE,KAAKtB,YAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfF,CAvFJ,CAFJ,CADA,CADF;AAoHD;;AAzUyB;;AA2U5B,eAAepB,GAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport Camera, { IMAGE_TYPES, FACING_MODES } from \"react-html5-camera-photo\";\r\nimport \"react-html5-camera-photo/build/css/index.css\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"./App.css\";\r\nimport \"./Camera.css\";\r\nimport \"./Emojicon\";\r\nimport Modal from \"./Modal\";\r\nimport AnotherRecipeButton from \"./Components/Recipes\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      idealFacingMode: FACING_MODES.USER, \r\n      myArray: [],\r\n      fishclass: \"\",\r\n      loading: false,\r\n      cameraOn: true,\r\n      image: false,\r\n      key: \"\",\r\n      upload: false,\r\n      dataUri: \"\",\r\n      prediction: false,\r\n      isOpen: false,\r\n      isEmptyState: true,\r\n      recipes: [ {id: 'pompano', title: 'fried pompano'} ],\r\n      displayRecipes: false\r\n    };\r\n  }\r\n    \r\n  \r\n\r\n  triggerRecipeState = () => {\r\n    this.setState({\r\n        displayRecipes: !this.state.displayRecipes\r\n    })\r\n}\r\n\r\n\r\n\r\n  getBase64(file, cb) {\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = function() {\r\n      cb(reader.result);\r\n    };\r\n    reader.onerror = function(error) {\r\n      console.log(\"Error: \", error);\r\n    };\r\n  }\r\n\r\n  showCamera = e => {\r\n    this.setState({\r\n      cameraOn: true,\r\n      image: false,\r\n      loading: false,\r\n      fishclass: \"\",\r\n      confidence: \"\",\r\n      dataUri: \"\",\r\n      key: \"\"\r\n    });\r\n  };\r\n\r\n  \r\n  onTakePhoto(dataUri) {\r\n    const savedImage = dataUri.split(\",\")[1];\r\n    fetch(\r\n      /* API endpoint here */ \"https://50xlesnkqe.execute-api.us-east-1.amazonaws.com/foodLens-deploy1/index\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ payload: savedImage })\r\n      }\r\n    )\r\n      .then(response => response.json())\r\n      .then(data =>\r\n        this.setState({\r\n          savedImage: data,\r\n          cameraOn: false,\r\n          loading: true,\r\n          dataUri: savedImage\r\n        })\r\n      )\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  handleShowDialog = () => {\r\n    this.setState({ isOpen: !this.state.isOpen });\r\n    console.log(\"clicked\");\r\n  };\r\n\r\n\r\n  handleUpload = event => {\r\n    if (this.uploadInput.files[0]) {\r\n      let file = this.uploadInput.files[0];\r\n      this.getBase64(file, result => {\r\n        fetch(\r\n          /* S3 endpoint here */ \"https://50xlesnkqe.execute-api.us-east-1.amazonaws.com/foodLens-deploy1/index\",\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              //\"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n              //'Access-Control-Allow-Origin': \"*\"\r\n            },\r\n            body: JSON.stringify({ payload: result.split(\",\")[1] })\r\n          }\r\n        )\r\n          .then(response => response.json())\r\n          .then(data => {\r\n        \r\n            console.log(\"tmp: \", data);\r\n          \r\n\r\n            this.setState({\r\n              result: data,\r\n              cameraOn: false,\r\n              image: true,\r\n              dataUri: result,\r\n              loading: true,\r\n              isOpen: true,\r\n              message: \"UPLOAD AN IMAGE\"\r\n            });\r\n          })\r\n          .catch(err => console.log(err));\r\n      });\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n\r\n\r\n  handleChange = e => {\r\n    if (this.uploadInput.files[0]) {\r\n      let file = this.uploadInput.files[0];\r\n      this.getBase64(file, result => {\r\n        this.setState({\r\n          dataUri: result,\r\n          cameraOn: false,\r\n          image: true,\r\n          prediction: false\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState({\r\n      isOpen: !this.state.isOpen\r\n    });\r\n  };\r\n\r\n  changeCameraType() {\r\n    if (this.state.idealFacingMode === FACING_MODES.ENVIRONMENT) {\r\n      this.setState({\r\n        idealFacingMode: FACING_MODES.USER,\r\n        isImageMirror: true\r\n      });\r\n    } else {\r\n      this.setState({\r\n        idealFacingMode: FACING_MODES.ENVIRONMENT,\r\n        isImageMirror: false\r\n      });\r\n    }\r\n  }\r\n\r\n  // displayResults = () => {\r\n  //   let popArray = [];\r\n  //   for (let key in this.state.result) {\r\n  //     popArray.push(\r\n  //       <p key={key} className=\"information\">\r\n  //         {key}: {this.state.result[key]}\r\n  //       </p>\r\n  //     );\r\n  //   }\r\n  //   return popArray;\r\n  // };\r\n\r\n  displayResults = () => {\r\n    let popArray = [];\r\n    let prediction = this.state.result.probability;\r\n    console.log(prediction);\r\n    if (prediction > 0.8) {\r\n      popArray.push(\r\n        <ol className=\"information\">\r\n          <li>Name: {this.state.result.display}</li>\r\n          <li>Size: {this.state.result.size}</li>\r\n          <li>Habitat: {this.state.result.habitat} </li>\r\n          <li>Weight: {this.state.result.weight}</li>\r\n          <li>Ethnicity: {this.state.result.ethnicity}</li>\r\n        </ol>\r\n      );\r\n    } else {\r\n      popArray.push(\r\n        <div class=\"cardContainer\">\r\n          <p>😔 Could not identify. Please try again </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return popArray\r\n  \r\n  }\r\n\r\n \r\n  render() {\r\n\r\n    let recipes = null;\r\n\r\n    if ( this.state.displayRecipes && this.state.handleUpload) {\r\n      recipes = (\r\n      <div>\r\n           { this.state.recipes.map((recipe, index) => {\r\n                return <AnotherRecipeButton key={recipe.id}\r\n                title={recipe.title} />\r\n           }) }\r\n      </div>\r\n      \r\n      ) \r\n    }\r\n\r\n   \r\n\r\n    return (\r\n      <div className=\"bg-image\">\r\n      <div className=\"App\">\r\n      \r\n          <div className=\"wizard\">\r\n            <h1>FOODLENS 🧐</h1>\r\n            {/*  {this.state.loading\r\n              ? setTimeout(() => {\r\n                  this.predictFish(  invoke endpoint URL\r\n                    \"\",\r\n                    {\r\n                      //method: \"POST\",\r\n                      headers: {\r\n                        //\"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n                        //'Access-Control-Allow-Origin': \"*\"\r\n                      },\r\n                       body: JSON.stringify({\r\n                        url:\r\n                         \"\" +\r\n                          this.state.key\r\n                      })\r\n                    }\r\n                  );\r\n                }, 2500)\r\n              : null} */}\r\n            {this.state.loading ? (\r\n              <Loader type=\"Grid\" color=\"#008080\" height=\"80\" width=\"80\" />\r\n            ) : null}\r\n            {this.state.image ? (\r\n              <div className=\"prediction\">\r\n                <img\r\n                  className=\"fishImg\"\r\n                  src={this.state.dataUri}\r\n                  alt=\"uploaded pic of fish\"\r\n                  onClick={this.handleShowDialog}\r\n                />\r\n                {this.state.prediction ? (\r\n                  <div>\r\n                    {parseFloat(this.state.confidence) > 85 ? (\r\n                      <div className=\"prediction\">\r\n                        <p>\r\n                          {/* This is a <span>{this.state.result}</span>  */}\r\n                        </p>\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <p>\r\n                          We were unable to identify this fish. Please try\r\n                          again.\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    <button className=\"openCamera\" onClick={this.showCamera}>\r\n                      Wanna take more photos?\r\n                    </button>\r\n                  </div>\r\n                ) : null}\r\n                <div>\r\n                  {/* This is a {\" \"} */}\r\n                  <Modal show={this.state.isOpen} onClose={this.toggleModal}>\r\n                    {this.state.result !== undefined\r\n                      ? this.displayResults()\r\n                      : \"\"}\r\n                  </Modal>\r\n                  <span>{this.state.payload}</span>\r\n                </div>\r\n                <button className=\"openCamera\" onClick={this.showCamera}>\r\n                  Take another photo!\r\n                </button>\r\n\r\n                <button className=\"recipeButton\" onClick={this.triggerRecipeState}>View Recipes</button>\r\n               {recipes}\r\n\r\n              </div>\r\n            ) : null}\r\n            {this.state.cameraOn ? (\r\n              <div className=\"camera\">\r\n                <Camera\r\n                  imageType={IMAGE_TYPES.JPG}\r\n                  idealFacingMode={this.state.idealFacingMode} \r\n                  isImageMirror={this.state.isImageMirror}\r\n                  idealResolution={{ width: 1440, height: 1440 }}\r\n                  onTakePhoto={dataUri => {\r\n                    this.onTakePhoto(dataUri);\r\n                  }}\r\n                />\r\n                <button onClick={this.changeCameraType.bind(this)}>\r\n            SWITCH</button>\r\n              </div>\r\n            ) : null}\r\n            {this.state.loading ? null : (\r\n              <div className=\"uploader\">\r\n                <input\r\n                  className=\"inputfile\"\r\n                  id=\"inputfile\"\r\n                  name=\"input\"\r\n                  ref={ref => {\r\n                    this.uploadInput = ref;\r\n                  }}\r\n                  onChange={this.handleChange}\r\n                  type=\"file\"\r\n                  accept=\"image/jpeg\"\r\n                />\r\n                <label htmlFor=\"inputfile\">\r\n                  SELECT <span role=\"img\" />\r\n                </label>\r\n                <button className=\"uploadButton\" onClick={this.handleUpload}>\r\n                  DETECT\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        \r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;"]},"metadata":{},"sourceType":"module"}